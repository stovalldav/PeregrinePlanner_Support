<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peregrine Planner - Help & Support</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4CAF50;
            --secondary: #FF9800;
            --dark: #333333;
            --gray: #757575;
            --gray-dark: #555555;
            --gray-light: #DDDDDD;
            --light: #F5F5F5;
            --white: #FFFFFF;
            --lightest-gray: #f7f9fc;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        header {
            background-color: var(--primary);
            color: var(--white);
            padding: 16px;
            position: relative;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header-title {
            font-size: 24px;
            font-weight: bold;
        }
        
        .header-links {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .header-link {
            color: var(--white);
            text-decoration: none;
            font-size: 14px;
            padding: 4px 8px;
            border: 1px solid rgba(255,255,255,0.5);
            border-radius: 4px;
            transition: all 0.2s ease;
        }
        
        .header-link:hover {
            background-color: rgba(255,255,255,0.2);
        }

        .tabs {
            display: flex;
            background-color: var(--white);
            border-bottom: 1px solid var(--gray-light);
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .tab:hover {
            background-color: var(--lightest-gray);
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            background-color: var(--lightest-gray);
        }

        .tab-content {
            display: none;
            background-color: var(--white);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .search-container {
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--gray-light);
            border-radius: 8px;
            font-size: 16px;
            background-color: var(--white);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .faq-item {
            border-bottom: 1px solid var(--gray-light);
            padding: 16px 0;
        }

        .faq-item:last-child {
            border-bottom: none;
        }

        .faq-question {
            cursor: pointer;
            padding: 12px 16px;
            background-color: var(--lightest-gray);
            border-radius: 8px;
            margin-bottom: 12px;
            font-weight: 500;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .faq-question:hover {
            background-color: var(--gray-light);
        }

        .faq-answer {
            padding: 0 16px;
            color: var(--gray-dark);
            display: none;
        }

        .faq-answer.expanded {
            display: block;
        }

        .guide-section {
            margin-bottom: 30px;
        }

        .guide-section-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 12px;
        }

        .guide-text {
            margin-bottom: 16px;
            line-height: 1.6;
        }

        .guide-instructions {
            background-color: var(--lightest-gray);
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
        }

        .instruction-title {
            font-weight: bold;
            color: var(--primary);
            display: block;
            margin-bottom: 8px;
        }

        .contact-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--gray-light);
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .submit-btn {
            background-color: var(--primary);
            color: var(--white);
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .submit-btn:hover {
            background-color: #45a049;
        }

        .submit-btn:disabled {
            background-color: var(--gray);
            cursor: not-allowed;
        }

        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary);
            color: var(--white);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
        }

        .back-to-top.visible {
            opacity: 1;
        }

        .orientation-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .orientation-content {
            background-color: var(--white);
            padding: 30px;
            border-radius: 12px;
            max-width: 400px;
            width: 90%;
            text-align: center;
        }

        .orientation-step {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 8px;
        }

        .orientation-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 16px;
        }

        .orientation-text {
            font-size: 16px;
            color: var(--dark);
            line-height: 1.6;
            margin-bottom: 24px;
        }

        .orientation-button {
            background-color: var(--primary);
            color: var(--white);
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            margin-right: 10px;
        }

        .orientation-skip {
            color: var(--gray);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                border-bottom: 1px solid var(--gray-light);
                border-right: none;
            }
            
            .tab.active {
                border-bottom-color: var(--primary);
            }
            
            .header-links {
                position: static;
                transform: none;
                margin-top: 10px;
            }
            
            .tab-content {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1 class="header-title">Peregrine Planner Help & Support</h1>
        <div class="header-links">
            <a href="privacy-policy.html" class="header-link">Privacy Policy</a>
        </div>
    </header>

    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="quickstart">Quickstart</div>
            <div class="tab" data-tab="guide">User Guide</div>
            <div class="tab" data-tab="faq">FAQ</div>
            <div class="tab" data-tab="contact">Contact</div>
        </div>

        <div id="quickstart" class="tab-content active">
            <div class="guide-section">
                <h2 class="guide-section-title">Getting Started Quickly</h2>
                
                <div class="guide-instructions">
                    <span class="instruction-title">1. Set Your Location</span>
                    <br>Tap the location button in the action bar (shows "Set Start" or your address) to use your current location or select a custom location on the map.
                </div>
                
                <div class="guide-instructions">
                    <span class="instruction-title">2. Learn About Local Birds</span>
                    <br>Visit the Learn tab to study birds common to your area. The app shows 5 birds at a time from recent eBird observations near your location. Mark each bird as learned after studying their features, habitats, and identification tips. Complete all 5 birds to take an interactive quiz - you need 80% to advance to the next set of birds. This builds your knowledge before planning trips.
                </div>
                
                <div class="guide-instructions">
                    <span class="instruction-title">3. Choose Birds</span>
                    <br>Select birds you want to see from the list by tapping on them. You can use the search bar to filter by name or the Hotspot Browser to select birds by location. In advanced mode, you can adjust the time period to see more historical data.
                </div>
                
                <div class="guide-instructions">
                    <span class="instruction-title">4. Plan Your Trip</span>
                    <br>Set your trip duration and click "Plan My Birding Trip" to generate an optimized itinerary. The app will create the most efficient route to maximize your chances of seeing all selected birds. If you have a custom start location set, you can choose to "Start route from current location" to begin your trip from where you are now instead of the search location. New birders can use the Learn tab for step-by-step guidance.
                </div>
                
                <div class="guide-instructions">
                    <span class="instruction-title">5. Go Birding!</span>
                    <br>Use the directions to navigate to each location and check off birds as you spot them. Mark birds as seen in your trip log and add notes about your observations. Take photos using the camera icon to document your sightings.
                </div>
                
                <div class="guide-instructions">
                    <span class="instruction-title">6. AI Bird Identification & Visual Aids</span>
                    <br>Use the ID tab for AI-powered bird identification. Bird Sounds Detection provides real-time audio identification using Cornell BirdNET AI with configurable sensitivity and regional filtering - toggle it on to automatically detect and log birds by their calls. Bird Photo Detection analyzes your photos to identify bird species with confidence scores. Both tools create trip logs automatically. Throughout the app, bird thumbnails from iNaturalist.org appear next to species names to help with visual identification - tap any thumbnail to see a larger image with photographer credits. Remember: AI identification is experimental and should always be validated with field guides or expert birders.
                </div>
                
                <div class="guide-instructions">
                    <span class="instruction-title">7. Log Sightings</span>
                    <br>The "Add Sighting" button in Trip Logs lets you quickly log birds encountered outside planned trips - select the birds, choose their location on an interactive map, and give the location a custom name. All sightings are automatically added to your Life List and Big Month count.
                </div>
                
                <div class="guide-instructions">
                    <span class="instruction-title">8. Save & Share</span>
                    <br>Save your trips to access them later from Trip Logs. You can import trips created by others, or export and share your own trips via email, messaging apps, or as calendar events. Your birding statistics are tallied in your Profile screen to track your progress over time. View your photos in the Photo Gallery and track progress in the Big Month feature.
                </div>
            </div>
        </div>

        <div id="faq" class="tab-content">
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search frequently asked questions..." id="faqSearch">
            </div>
            <div id="faqContainer">
                <!-- FAQ items will be populated by JavaScript -->
            </div>
        </div>

        <div id="guide" class="tab-content">
            <div class="guide-section">
                <h2 class="guide-section-title">Comprehensive User Guide</h2>
                
                <div class="guide-section">
                    <h3 class="guide-section-title">Plan Screen</h3>
                    <p class="guide-text">
                        The Plan screen shows a list of birds observed near your current or selected location. Tap on any bird to select it for your trip plan (selected birds will be highlighted). Use the search bar to filter by name and the time filter to adjust how many days of observations to include. The main navigation includes Learn, Plan, ID, Log, and More tabs.
                    </p>
                    <div class="guide-instructions">
                        <span class="instruction-title">How to use:</span>
                        <br>1. Tap the location button in the action bar to change your location
                        <br>2. Use the search bar to find specific birds by name
                        <br>3. Tap the filter icon to adjust observation time periods (7, 14, or 30 days)
                        <br>4. Tap any bird in the list to select it for your trip
                        <br>5. Use the action bar buttons to access Species Map, Hotspots, and other features
                    </div>
                </div>
                
                <div class="guide-section">
                    <h3 class="guide-section-title">Action Bar Navigation</h3>
                    <p class="guide-text">
                        The action bar on the Plan screen provides quick access to key features: Location button (Set Start/current address), Species Map button, and Hotspots button for exploring birding locations and data.
                    </p>
                    <div class="guide-instructions">
                        <span class="instruction-title">Action Bar Buttons:</span>
                        <br>• Location (Set Start): Opens location picker to set your starting location
                        <br>• Species Map: Opens Species Map screen showing recent eBird data
                        <br>• Hotspots: Opens the Hotspot Browser to explore birding locations
                    </div>
                </div>
                
                <div class="guide-section">
                    <h3 class="guide-section-title">Bird Identification (ID Tab)</h3>
                    <p class="guide-text">
                        The ID tab contains AI-powered bird identification tools that help you identify birds you encounter in the field. These tools use advanced machine learning to analyze bird sounds and images for accurate species identification. Note: The bird database supporting these features is currently incomplete, so some species may not be recognized or may have limited information.
                    </p>
                    <div class="guide-instructions">
                        <span class="instruction-title">Bird Sounds Detection:</span>
                        <br>1. Navigate to ID → Bird Sounds Detection
                        <br>2. Configure detection settings:
                        <br>   • Choose sensitivity level: Low (conservative), Medium (balanced), or High (detects more but may include false positives)
                        <br>   • Enable "Regional Species Filter" to boost confidence for local birds
                        <br>   • Toggle "Enhanced Processing" for improved accuracy in noisy environments
                        <br>3. Toggle the switch to "On" to start real-time listening
                        <br>4. The app uses Cornell BirdNET AI with enhanced sensitivity (3-5% confidence threshold)
                        <br>5. When a bird is detected for the FIRST time, a detailed information card opens automatically
                        <br>6. Subsequent detections of the same species highlight briefly with "🔊 Detected again!"
                        <br>7. Add detected birds to existing trips or create new trip logs
                    </div>
                    
                    <div class="guide-instructions">
                        <span class="instruction-title">Bird Photo Detection:</span>
                        <br>1. Navigate to ID → Bird Photo Detection
                        <br>2. Select multiple photos from gallery or take new ones with the camera
                        <br>3. AI analyzes each image and provides species suggestions with confidence scores
                        <br>4. View results grouped by species or individually by photo
                        <br>5. When creating new trips, you can add detected birds to existing active trips or create new ones
                        <br>6. Remember: AI identification is experimental and should be verified with field guides
                    </div>
                </div>
                
                <div class="guide-section">
                    <h3 class="guide-section-title">Trip Logs & Life List</h3>
                    <p class="guide-text">
                        Track your birding progress with comprehensive trip logs and automatically build your Life List as you discover new species. The "Add Sighting" button lets you quickly log birds encountered outside planned trips.
                    </p>
                    <div class="guide-instructions">
                        <span class="instruction-title">Using Trip Logs:</span>
                        <br>1. Access active and completed trips from the Trip Logs tab
                        <br>2. Mark birds as seen by tapping checkboxes in your trip itinerary
                        <br>3. Add notes, counts, and photos to your sightings
                        <br>4. Use the floating "Add Sighting" button for quick entries outside planned trips
                        <br>5. Select birds, choose location on interactive map, and give custom location names
                        <br>6. All sightings automatically added to Life List and Big Month count
                        <br>7. Export trips to eBird for citizen science contributions
                    </div>
                    
                    <div class="guide-instructions">
                        <span class="instruction-title">How to use your Life List:</span>
                        <br>1. Navigate to My Trips > Life List from the bottom navigation
                        <br>2. Toggle between "Birds" and "Hotspots" views at the top
                        <br>3. Use the search bar to find specific species or locations
                        <br>4. Apply time filters to view:
                        <br>   • All Time - Your complete life list
                        <br>   • Year - Birds seen this year
                        <br>   • 6 Months - Recent sightings
                        <br>   • 3 Months - Most recent activity
                        <br>5. Tap any bird thumbnail to view detailed species information
                        <br>6. Click on any bird name to see detailed sighting information
                        <br>7. View statistics including rarity scores and first sighting dates
                        <br>   • First sighting date and location
                        <br>   • Number of times spotted
                        <br>   • Rarity indicators for significant sightings
                        <br>   • Your photos (if any)
                        <br>   • Related species you've seen
                        <br>8. Navigate to original trip logs from sighting details
                        <br>9. Benefit from automatic duplicate detection and removal
                    </div>
                </div>
                
                <div class="guide-section">
                    <h3 class="guide-section-title">Learning & Progress</h3>
                    <p class="guide-text">
                        The Learn tab provides structured learning activities for birders of all levels, with location-based bird selection and interactive quizzes with progress tracking.
                    </p>
                    <div class="guide-instructions">
                        <span class="instruction-title">Learning Features:</span>
                        <br>• Location-based bird selection from real eBird data (5 birds at a time)
                        <br>• Interactive quizzes with multiple choice questions
                        <br>• Must achieve 80% to advance to next set of birds
                        <br>• Progress tracking with points and streaks
                        <br>• Comprehensive bird information and identification tips
                        <br>• Reset option to start fresh learning journey
                    </div>
                </div>
                
                <div class="guide-section">
                    <h3 class="guide-section-title">Bird Thumbnails & Visual Aids</h3>
                    <p class="guide-text">
                        Throughout the app, bird thumbnails from iNaturalist.org appear next to species names to help with visual identification. These images are cached for offline viewing and properly credited to photographers.
                    </p>
                    <div class="guide-instructions">
                        <span class="instruction-title">Thumbnail Features:</span>
                        <br>• Appear in Plan screen, Trip Plans, Trip Logs, Life List, and State Goals screens
                        <br>• Tap any thumbnail to open comprehensive bird information card
                        <br>• Cards include habitat, identification features, behavior, and external links
                        <br>• Advanced name matching handles various bird naming conventions
                        <br>• Hybrid species support for complete eBird taxonomy coverage
                        <br>• Manage image downloads in More > Settings > Image Cache Management
                    </div>
                </div>
            </div>
        </div>

        <div id="contact" class="tab-content">
            <div class="contact-form">
                <h2 class="guide-section-title">Contact Support</h2>
                <p class="guide-text">
                    Need help with Peregrine Planner? Send us a message and we'll get back to you as soon as possible.
                </p>
                
                <form id="contactForm">
                    <div class="form-group">
                        <label for="name" class="form-label">Name</label>
                        <input type="text" id="name" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" id="email" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="subject" class="form-label">Subject</label>
                        <select id="subject" class="form-select">
                            <option value="Bug Report">Bug Report</option>
                            <option value="Feature Request">Feature Request</option>
                            <option value="General Question">General Question</option>
                            <option value="Technical Support">Technical Support</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="message" class="form-label">Message</label>
                        <textarea id="message" class="form-textarea" required placeholder="Please describe your issue or question in detail..."></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn" id="submitBtn">Send Message</button>
                </form>
            </div>
        </div>
    </div>

    <div class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </div>

    <!-- Orientation Modal -->
    <div id="orientationModal" class="orientation-modal" style="display: none;">
        <div class="orientation-content">
            <div class="orientation-step" id="orientationStep">Step 1 of 4</div>
            <h2 class="orientation-title" id="orientationTitle">Welcome to Help & Support</h2>
            <p class="orientation-text" id="orientationText">
                This help system contains everything you need to know about using Peregrine Planner effectively. Let's take a quick tour of the available resources.
            </p>
            <button class="orientation-button" id="orientationNext">Next</button>
            <button class="orientation-skip" id="orientationSkip">Skip Tour</button>
        </div>
    </div>

    <script src="help-script.js"></script>
</body>
</html>